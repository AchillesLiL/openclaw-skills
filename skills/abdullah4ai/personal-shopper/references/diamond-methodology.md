# Diamond Search Methodology

## المفهوم

منهجية البحث الماسي: 7 وكلاء في 3 طبقات يبحثون بالتوازي، كل وكيل من زاوية مختلفة، ثم تتجمع النتائج في نقطة واحدة.

```
         [BRIEF]
            |
    --------+--------
    |   |    |   |
   [1] [2]  [3] [4]     ← Search Layer (متوازي)
    |   |    |   |
    --------+--------
            |
        [5]   [6]        ← Expertise Layer (متوازي)
            |
      [CONVERGENCE]      ← تجميع
            |
           [7]            ← Price Layer
            |
        [OUTPUT]
```

## قاعدة سياق الفريق

كل وكيل يبدأ بهالجملة:

> "أنت جزء من فريق بحث مكوّن من 7 وكلاء. دورك: [role]. زملاؤك يغطون الزوايا الأخرى — ركّز على دورك بالتحديد."

السبب: بدون هالسياق، كل وكيل يحاول يغطي كل شي ويطلع نتائج مكررة.

## قاعدة مرونة العدد

العدد 7 مو ثابت. لو المنتج بسيط (مثلا: كيبل USB-C)، ممكن تكتفي بـ 3 وكلاء: Mainstream + Local Market + Price. القاعدة: استخدم وكلاء بقدر تعقيد القرار.

---

## طبقة البحث (Search Layer)

### Agent 1: Mainstream Research

**الدور:** بحث في المصادر الرئيسية المعروفة
**المصادر:** Reddit, YouTube (reviews مفصلة), Wirecutter, RTINGS, Tom's Guide
**المخرج:** أفضل 3-5 خيارات مع رابط المصدر وسبب الترشيح

**تعليمات:**
- ركّز على مراجعات آخر 12 شهر
- فضّل المراجعات المقارنة على المراجعات الفردية
- سجّل أي إجماع واضح (نفس المنتج يتكرر عند عدة مصادر)

### Agent 2: Anti-Bias Research

**الدور:** كسر فقاعة النتائج المعتادة
**المنهج:** بحث عكسي، بدائل حسب البراند، بحث حسب بلد المنشأ
**المخرج:** 2-4 خيارات بديلة مع مبرر كل واحد

**تعليمات:**
- استخدم الاستراتيجيات الست من `anti-bias-playbook.md`
- وسّع الأفق، لا تستبعد الخيارات المشهورة
- لو ما لقيت بديل حقيقي أفضل، قل ذلك بصراحة

### Agent 3: Local Market Scanner

**الدور:** مسح السوق السعودي
**المنصات:** Amazon.sa, noon.com, jarir.com, extra.com
**المخرج:** جدول بالأسعار والتوفر لكل منتج مرشح

**تعليمات:**
- تحقق من نوع البائع: رسمي، موزع معتمد، أو طرف ثالث
- سجّل سعر الشحن والضريبة
- تحقق من وجود ضمان محلي
- نبّه لو السعر المحلي أعلى بكثير من السعر الدولي (Price Inversion)

### Agent 4: Niche Community Diver

**الدور:** استكشاف المجتمعات المتخصصة
**المصادر:** منتديات، مجموعات Facebook، Discord servers، subreddits صغيرة
**المخرج:** توصيات من محترفين مع سياق الاستخدام

**تعليمات:**
- ابحث عن آراء المستخدمين الفعليين مو المراجعين
- ركّز على المشاكل اللي واجهوها بعد فترة استخدام
- المجتمعات المهنية أهم من المجتمعات العامة

---

## طبقة الخبرة (Expertise Layer)

### Agent 5: Domain Expert

**الدور:** خبير المجال، يحكم ولا يبحث
**المدخل:** نتائج طبقة البحث كاملة
**المخرج:** تحليل تقني + ترتيب الخيارات

**البرومبت الكامل:**

```
أنت جزء من فريق بحث مكوّن من 7 وكلاء. دورك: Domain Expert. زملاؤك يغطون الزوايا الأخرى — ركّز على دورك بالتحديد.

أنت خبير في مجال {product_category}. فريق البحث جمع لك النتائج التالية:

{search_layer_results}

مهمتك: حلل هالنتائج كخبير. لا تبحث. لا تضيف منتجات جديدة.

اسأل 5 أسئلة:
1. هل المواصفات تخدم الاستخدام الفعلي للمستخدم؟
2. وش الفرق الحقيقي بين الخيارات المرشحة؟ (مو الفرق على الورق)
3. هل فيه مواصفات مبالغ فيها (overkill) للاستخدام المطلوب؟
4. وش اللي ما ينذكر عادة في المراجعات لكنه مهم؟
5. لو تشتري لنفسك، وش تختار ولِيه؟

رتّب الخيارات من الأفضل للأقل مع تبرير.
```

### Agent 6: Latest Tech Tracker

**الدور:** تتبع آخر التطورات والإعلانات
**المدخل:** نوع المنتج
**المخرج:** معلومات التوقيت والأجيال

**البرومبت الكامل:**

```
أنت جزء من فريق بحث مكوّن من 7 وكلاء. دورك: Latest Tech Tracker. زملاؤك يغطون الزوايا الأخرى — ركّز على دورك بالتحديد.

المنتج: {product}

ابحث عن:
1. منتجات جديدة أُعلنت آخر 6 شهور في هالفئة
2. إعلانات من معارض CES, MWC, IFA الأخيرة
3. هل فيه جيل جديد متوقع خلال 3 شهور
4. منتجات توقف إنتاجها أو أُعلن عن إيقافها
5. مقارنة سريعة: الجيل الحالي مقابل السابق (هل الترقية تستاهل)

استراتيجيات البحث:
- حدد البحث بآخر 6 شهور
- استخدم كلمات: "launch", "announced", "new", "2024", "2025"
- ابحث بأسماء المعارض + فئة المنتج
- تحقق من صفحات "new arrivals" على المواقع الرسمية
- ابحث عن "discontinued" + اسم المنتج

المطلوب: هل الوقت مناسب للشراء أو الأفضل ينتظر؟ مع السبب.
```

**قاعدة:** عند تعارض رأي الخبير (Agent 5) مع Latest Tech (Agent 6)، رأي الخبير يتفوق. السبب: الخبير يفهم القيمة الفعلية بينما Latest Tech يركز على الجديد فقط.

---

## طبقة السعر (Price Layer)

### Agent 7: Price & Deal Hunter

**الدور:** إيجاد أفضل صفقة ممكنة
**المدخل:** المنتجات النهائية بعد التجميع
**المخرج:** أفضل سعر مع كل التفاصيل

**البرومبت الكامل:**

```
أنت جزء من فريق بحث مكوّن من 7 وكلاء. دورك: Price & Deal Hunter. زملاؤك يغطون الزوايا الأخرى — ركّز على دورك بالتحديد.

المنتجات المطلوب تسعيرها:
{converged_products}

لكل منتج:

1. السعر الحالي على كل منصة سعودية (Amazon.sa, noon, jarir, extra)
2. كوبونات وأكواد خصم فعّالة حاليا
3. عروض كاشباك:
   - بطاقات بنكية (الراجحي، الأهلي، STC Pay)
   - تطبيقات كاشباك
4. خيارات تقسيط بدون فوائد (تمارا، تابي)
5. برامج Trade-in اذا متوفرة
6. تفاصيل البائع:
   - نوع البائع (رسمي/موزع/طرف ثالث)
   - تكلفة الشحن
   - هل الضريبة مشمولة
   - مدة التوصيل
   - سياسة الاسترجاع

تحقق من Price Inversion: قارن السعر المحلي بالسعر الدولي (أمازون أمريكا + شحن). اذا الفرق أكثر من 30%، نبّه.
```

---

## قواعد التجميع (Convergence Rules)

1. **إجماع 3/4:** اذا 3 من 4 وكلاء بحث رشحوا نفس المنتج، هذي إشارة قوية. لكن تحقق: هل اعتمدوا على نفس المصدر الأصلي؟ اذا كلهم من Wirecutter، هذا مصدر واحد مو ثلاثة.

2. **الخبير يحسم:** عند التعارض بين نتائج البحث وتحليل الخبير، الخبير يتفوق.

3. **الصراحة أولا:** اذا كل الوكلاء وصلوا لنفس النتيجة (المنتج المشهور هو فعلا الأفضل)، لا تخترع بديل. قل: "الخيار المشهور هو فعلا الأفضل لهالاستخدام."

4. **التوقيت يلغي:** اذا Agent 6 اكتشف إن جيل جديد ينزل خلال شهر، هالمعلومة قد تلغي كل التوصيات. قدمها بوضوح للمستخدم وخلّه يقرر.

5. **السعر المحلي يحكم:** المنتج ممكن يكون الأفضل عالميا لكن في السوق السعودي سعره مضاعف. القيمة تتحدد بالسعر المحلي.
